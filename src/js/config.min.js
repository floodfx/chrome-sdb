(function(){var Settings;
Settings=function(){function b(a,c,d,e){this.access_key=a;this.secret_key=c;this.region=d!=null?d:"us-east-1";this.version=e!=null?e:"2009-04-15"}b.prototype.use_access_key=function(a){this.access_key=a;return this};b.prototype.use_secret_key=function(a){this.secret_key=a;return this};b.prototype.use_region=function(a){this.region=a;return this};b.prototype.use_version=function(a){this.version=a;return this};b.prototype.get_access_key=function(){return this.access_key};b.prototype.get_secret_key=function(){return this.secret_key};
b.prototype.get_region=function(){return this.region};b.prototype.get_version=function(){return this.version};b.prototype.to_json=function(){return{access_key:this.access_key,secret_key:this.secret_key,region:this.region,version:this.version}};b.from_json=function(a){return a?new b(a.access_key,a.secret_key,a.region,a.version):null};return b}();var Storage;
Storage=function(){var b;b={};b.get=function(a,c){var d;if(c==null)c=false;d=localStorage.getItem(a);if(c)d=JSON.parse(d);return d};b.set=function(a,c,d){if(d==null)d=false;if(d)c=JSON.stringify(c);localStorage.setItem(a,c);return c};b.del=function(a){return localStorage.removeItem(a)};return b}();var Profile;
Profile=function(){function b(a,c){this.name=a;this.settings=c}b.prototype.use_name=function(a){this.name=a;return this};b.prototype.use_settings=function(a){this.settings=a;return this};b.prototype.get_name=function(){return this.name};b.prototype.get_settings=function(){return this.settings};b.prototype.make_primary=function(){Storage.set("chrome-sdb.primary-profile",this.name);return this};b.prototype.save=function(a){var c;if(a==null)a=false;c=b.find_all();c[this.name]=this.settings.to_json();
Storage.set("chrome-sdb.profiles",c,true);if(b.primary()===null||a)this.make_primary();return this};b.prototype["delete"]=function(){b["delete"](this.name);return null};b.prototype.to_json=function(){return{name:this.name,settings:this.settings.to_json()}};b.primary=function(){var a;a=Storage.get("chrome-sdb.primary-profile");return b.find(a)};b.from_json=function(a){return a?new b(a.name,Settings.from_json(a.settings)):null};b.find_all=function(){var a;return(a=Storage.get("chrome-sdb.profiles",
true))!=null?a:{}};b.find=function(a){var c,d,e;d=b.find_all();for(c in d){e=d[c];if(a===c)return new b(c,Settings.from_json(e))}return null};b["delete"]=function(a){var c;c=b.find_all();delete c[a];return Storage.set("chrome-sdb.profiles",c,true)};return b}();var message,primary,profiles;primary=Profile.primary();profiles=Profile.find_all();
if(primary===null&&profiles==={}){message='<div class="alert-message warning">\n  <a id="close_message_box" class="close" href="#">\u00d7</a>\n  <p><strong>Create a profile</strong> Enter your AWS Credentials to begin.</p>\n</div>';$(function(){$("#message_box").append(message).show();return $("#close_message_box").click(function(){return $("#message_box").hide()})})}else $(function(){var b,a,c;a=function(){var d;d=[];for(b in profiles){c=b===primary.get_name()?"In use":'<a id="use_profile_'+b+'" class="btn" href="#">Use</a>';
d.push("<tr><td>"+b+'</td><td><a id="profile_'+b+'" href="#edit_profile">Edit</a></td><td>'+c+"</td></tr>")}return d}();return $("#profiles_table > tbody").html(a.join(""))});$(function(){$("#save_profile").click(function(){var b,a,c;a=$("#profile_name").val();b=$("#profile_aws_access_key").val();c=$("#profile_aws_secret_key").val();(new Profile(a,new Settings(b,c))).save();return $("#create_profile_modal").modal("hide")});return $("#cancel_profile").click(function(){return $("#create_profile_modal").modal("hide")})});})();
