(function(){var SHA1;
SHA1=function(){var c,a,b,d,f,e,l,p,n,o,k,r,u,s;d={};o=function(i){return c(a(l(i),i.length*8))};n=function(i,g){var h,j,q,m;h=l(i);if(h.length>16)h=a(h,i.length*8);q=Array(16);m=Array(16);for(j=0;j<16;j++){q[j]=h[j]^909522486;m[j]=h[j]^1549556828}h=a(q.concat(l(g)),512+g.length*8);return c(a(m.concat(h),672))};p=function(i,g){var h,j,q,m,t;if(g==null)g=true;h=g?"0123456789abcdef":"0123456789ABCDEF";q="";j=0;for(t=i.length;0<=t?j<t:j>t;0<=t?j++:j--){m=i.charCodeAt(j);q+=h.charAt(m>>>4&15)+h.charAt(m&
15)}return q};e=function(i,g){var h,j,q,m,t;if(g==null)g="=";m="";q=i.length;for(h=0;h<q;h+=3){t=i.charCodeAt(h)<<16|(h+1<q?i.charCodeAt(h+1)<<8:0)|(h+2<q?i.charCodeAt(h+2):0);for(j=0;j<4;j++)m+=h*8+j*6>i.length*8?g:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>>6*(3-j)&63)}return m};f=function(i,g){var h,j,q,m,t,w,v,x;j=g.length;q=[];h=Array(Math.ceil(i.length/2));m=0;for(t=h.length;0<=t?m<t:m>t;0<=t?m++:m--)h[m]=i.charCodeAt(m*2)<<8|i.charCodeAt(m*2+1);for(;h.length>
0;){w=[];m=v=0;for(x=h.length;0<=x?m<x:m>x;0<=x?m++:m--){v=(v<<16)+h[m];t=Math.floor(v/j);v-=t*j;if(w.length>0||t>0)w[w.length]=t}q[q.length]=v;h=w}h="";for(m=j=q.length-1;j<=0?m<=0:m>=0;j<=0?m++:m--)h+=g.charAt(q[m]);q=Math.ceil(i.length*8/(Math.log(g.length)/Math.log(2)));for(m=j=h.length;j<=q?m<=q:m>=q;j<=q?m++:m--)h=g[0]+h;return h};s=function(i){var g,h,j,q,m;h="";g=0;for(m=i.length;0<=m?g<m:g>m;0<=m?g++:g--){j=i.charCodeAt(g);q=g+1<i.length?i.charCodeAt(g+1):0;if(55296<=j&&j<=56319&&56320<=
q&&q<=57343){j=65536+((j&1023)<<10)+(q&1023);g++}if(j<=127)h+=String.fromCharCode(j);else if(j<=2047)h+=String.fromCharCode(192|j>>>6&31,128|j&63);else if(j<=65535)h+=String.fromCharCode(224|j>>>12&15,128|j>>>6&63,128|j&63);else if(j<=2097151)h+=String.fromCharCode(240|j>>>18&7,128|j>>>12&63,128|j>>>6&63,128|j&63)}return h};l=function(i){var g,h,j;h=Array(i.length>>2);g=0;for(j=h.length;0<=j?g<j:g>j;0<=j?g++:g--)h[g]=0;g=0;for(j=i.length*8;g<j;g+=8)h[g>>5]|=(i.charCodeAt(g/8)&255)<<24-g%32;return h};
c=function(i){var g,h,j;h="";g=0;for(j=i.length*32;g<j;g+=8)h+=String.fromCharCode(i[g>>5]>>>24-g%32&255);return h};a=function(i,g){var h,j,q,m,t,w,v,x,z,A,B,C,D,y,E;i[g>>5]|=128<<24-g%32;i[(g+64>>9<<4)+15]=g;y=Array(80);h=1732584193;j=-271733879;q=-1732584194;m=271733878;t=-1009589776;w=0;for(E=i.length;w<E;w+=16){x=h;z=j;A=q;B=m;C=t;for(v=0;v<80;v++){y[v]=v<16?i[w+v]:b(y[v-3]^y[v-8]^y[v-14]^y[v-16],1);D=k(k(b(h,5),r(v,j,q,m)),k(k(t,y[v]),u(v)));t=m;m=q;q=b(j,30);j=h;h=D}h=k(h,x);j=k(j,z);q=k(q,
A);m=k(m,B);t=k(t,C)}return Array(h,j,q,m,t)};r=function(i,g,h,j){return i<20?g&h|~g&j:i<40?g^h^j:i<60?g&h|g&j|h&j:g^h^j};u=function(i){return i<20?1518500249:i<40?1859775393:i<60?-1894007588:-899497514};k=function(i,g){var h;h=(i&65535)+(g&65535);return(i>>16)+(g>>16)+(h>>16)<<16|h&65535};b=function(i,g){return i<<g|i>>>32-g};d.hex_sha1=function(i){return p(o(s(i)))};d.b64_sha1=function(i){return e(o(s(i)))};d.any_sha1=function(i,g){return f(o(s(i)),g)};d.hex_hmac_sha1=function(i,g){return p(n(s(i),
s(g)))};d.b64_hmac_sha1=function(i,g){return e(n(s(i),s(g)))};d.any_hmac_sha1=function(i,g,h){return f(n(s(i),s(g)),h)};return d}();var AwsUtils;
AwsUtils=function(){var c,a,b,d,f;f=function(e){e=e.toString();if(e.length<2)e="0"+e;return e};d=function(e){return[e.getUTCFullYear(),f(e.getUTCMonth()+1),f(e.getUTCDate())].join("-")};c=function(e){return[f(e.getUTCHours()),f(e.getUTCMinutes()),f(e.getUTCSeconds())].join(":")};b=function(e,l){return e===l?0:e.toLowerCase()>l.toLowerCase()?1:-1};a={};a.date_time_format=function(e){if(e==null)e=new Date;return""+d(e)+"T"+c(e)+".000Z"};a.generate_sig=function(e,l){var p,n,o;n=function(){var k;k=[];
for(p in e)k.push(p);return k}();n.sort(b);o=function(){var k,r,u;u=[];k=0;for(r=n.length;k<r;k++){p=n[k];u.push(""+p+e[p])}return u}();return SHA1.b64_hmac_sha1(l,o.join(""))};return a}();var SimpleDB,__indexOf=Array.prototype.indexOf||function(c){for(var a=0,b=this.length;a<b;a++)if(this[a]===c)return a;return-1};
SimpleDB=function(){function c(a,b,d){this.profile=a;this.secure=b!=null?b:false;this.error_callback=d!=null?d:this.default_callback;this.protocol=this.secure?"https":"http";this.endpoint=this.profile.get_settings().get_region();this.sdb_base_url=""+this.protocol+"://"+this.endpoint+"?"}c.prototype.set_profile=function(a){return this.profile=a};c.prototype.default_callback=function(a,b){if(b==null)b=null;console.log(a);if(b!==null)return console.log(b)};c.prototype.build_request_url=function(a,b){var d,
f;b.Action=a;b.Timestamp=AwsUtils.date_time_format();b.AWSAccessKeyId=this.profile.get_settings().get_access_key();b.Version=this.profile.get_settings().get_version();b.SignatureVersion=1;b.Signature=AwsUtils.generate_sig(b,this.profile.get_settings().get_secret_key());return this.sdb_base_url+function(){var e;e=[];for(d in b){f=b[d];e.push(d+"="+encodeURIComponent(f))}return e}().join("&")};c.regions=function(){return[{name:"US East (Northern Virginia) Region",endpoint:"sdb.amazonaws.com"},{name:"US West (Oregon) Region",
endpoint:"sdb.us-west-2.amazonaws.com"},{name:"US West (Northern California) Region",endpoint:"sdb.us-west-1.amazonaws.com"},{name:"EU (Ireland) Region",endpoint:"sdb.eu-west-1.amazonaws.com"},{name:"Asia Pacific (Singapore) Region",endpoint:"sdb.ap-southeast-1.amazonaws.com"},{name:"Asia Pacific (Tokyo) Region",endpoint:"sdb.ap-northeast-1.amazonaws.com"},{name:"South America (Sao Paulo) Region",endpoint:"sdb.sa-east-1.amazonaws.com"}]};c.parse_metadata=function(a,b,d){return{meta:{req_id:$("RequestId",
a).text(),box_usage:parseFloat($("BoxUsage",a).text()),status:b,req_url:d}}};c.prototype.ajax_request=function(a,b,d,f){if(d==null)d="GET";if(f==null)f=this.error_callback;return $.ajax({type:d,url:a,success:function(e,l){return b(c.parse_metadata(e,l,a),e)},error:function(e,l){var p;p=c.parse_metadata(e.responseXML,l,a);p.error={msg:$("Message",e.responseXML).text(),code:$("Code",e.responseXML).text()};return f(p,e.responseXML)},dataType:"xml"})};c.prototype.list_domains=function(a,b,d){var f,e;
if(a==null)a=this.default_callback;if(b==null)b=100;if(d==null)d=null;if(__indexOf.call(function(){e=[];for(f=1;f<=100;f++)e.push(f);return e}.apply(this),b)<0)throw"Max domains must be between 1 and 100";b={MaxNumberOfDomains:b};if(d)b.NextToken=d;return this.ajax_request(this.build_request_url("ListDomains",b),function(l,p){var n;n=[];$("DomainName",p).each(function(){return n.push($(this).text())});l.domains=n;l.next_token=$("NextToken",p).text();return a(l)})};c.prototype.domain_metadata=function(a,
b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("DomainMetadata",{DomainName:a}),function(d,f){d.creation_date_time=$("CreationDateTime",f).text();d.item_count=parseInt($("ItemCount",f).text());d.item_names_size_bytes=parseInt($("ItemNamesSizeBytes",f).text());d.attribute_name_count=parseInt($("AttributeNameCount",f).text());d.attribute_names_size_bytes=parseInt($("AttributeNamesSizeBytes",f).text());d.attribute_value_count=parseInt($("AttributeValueCount",f).text());
d.attribute_values_size_bytes=parseInt($("AttributeValuesSizeBytes",f).text());d.timestamp=$("Timestamp",f).text();return b(d)})};c.prototype.select=function(a,b,d){if(b==null)b=this.default_callback;if(d==null)d=null;a={SelectExpression:a};if(d)a.NextToken=d;return this.ajax_request(this.build_request_url("Select",a),function(f,e){var l,p,n;n=[];p={};$("Item",e).each(function(){var o;o={attrs:{},name:$("Name:first",$(this)).text()};$("Attribute",$(this)).each(function(){var k,r;k=$("Name",$(this)).text();
p[k]=k;r=$("Value",$(this)).text();o.attrs[k]||(o.attrs[k]=[]);return o.attrs[k].push(r)});return n.push(o)});f.items=n;f.attr_names=function(){var o;o=[];for(l in p)o.push(l);return o}();d=$("NextToken",e).text();if(d!=="")f.next_token=d;return b(f)})};c.prototype.get_attributes=function(a,b,d,f){var e;if(d==null)d=this.default_callback;if(f==null)f=[];b={DomainName:a,ItemName:b};a=0;for(e=f.length;0<=e?a<e:a>e;0<=e?a++:a--)b["AttributeName."+a]=f[a];return this.ajax_request(this.build_request_url("GetAttributes",
b),function(l,p){var n;l.error!=null&&d(l);n={};$("Attribute",p).each(function(){var o,k;o=$("Name",$(this)).text();k=$("Value",$(this)).text();n[o]||(n[o]=[]);return n[o].push(k)});l.attributes=n;return d(l)})};c.prototype.put_attributes=function(a,b,d,f){var e,l,p,n,o,k,r;if(f==null)f=this.default_callback;l={DomainName:a,ItemName:b};n=b=0;for(k=d.length;n<k;n++){a=d[n];e=a.values;o=0;for(r=e.length;o<r;o++){p=e[o];l["Attribute."+b+".Name"]=a.name;l["Attribute."+b+".Value"]=p;if(a.replace&&a.replace===
true)l["Attribute."+b+".Replace"]=true;b+=1}}return this.ajax_request(this.build_request_url("PutAttributes",l),function(u){return f(u)})};c.prototype.delete_attributes=function(a,b,d,f){var e,l,p,n,o,k,r;if(f==null)f=this.default_callback;l={DomainName:a,ItemName:b};n=b=0;for(k=d.length;n<k;n++){a=d[n];if(e=a.values){o=0;for(r=e.length;o<r;o++){p=e[o];l["Attribute."+b+".Name"]=a.name;l["Attribute."+b+".Value"]=p;b+=1}}else{l["Attribute."+b+".Name"]=a.name;b+=1}}return this.ajax_request(this.build_request_url("DeleteAttributes",
l),function(u){return f(u)})};c.prototype.batch_delete_attributes=function(a,b,d){var f,e,l,p,n,o,k,r,u,s,i;if(d==null)d=this.default_callback;p={DomainName:a};a=0;for(s=b.length;0<=s?a<s:a>s;0<=s?a++:a--){f=b[a];e=f.item_name;p["Item."+a+".ItemName"]=e;e=0;i=f.item_attrs;o=0;for(r=i.length;o<r;o++){f=i[o];if(l=f.values){k=0;for(u=l.length;k<u;k++){n=l[k];p["Item."+a+".Attribute."+e+".Name"]=f.name;p["Item."+a+".Attribute."+e+".Value"]=n;e+=1}}else{p["Item."+a+".Attribute."+e+".Name"]=f.name;e+=1}}}return this.ajax_request(this.build_request_url("BatchDeleteAttributes",
p),function(g){return d(g)})};c.prototype.batch_put_attributes=function(a,b,d){var f,e,l,p,n,o,k,r,u,s,i;if(d==null)d=this.default_callback;p={DomainName:a};a=0;for(s=b.length;0<=s?a<s:a>s;0<=s?a++:a--){f=b[a];e=f.item_name;p["Item."+a+".ItemName"]=e;e=0;i=f.item_attrs;o=0;for(r=i.length;o<r;o++){f=i[o];l=f.values;k=0;for(u=l.length;k<u;k++){n=l[k];p["Item."+a+".Attribute."+e+".Name"]=f.name;p["Item."+a+".Attribute."+e+".Value"]=n;if(f.replace&&f.replace===true)p["Item."+a+".Attribute."+e+".Replace"]=
true;e+=1}}}return this.ajax_request(this.build_request_url("BatchPutAttributes",p),function(g){return d(g)})};c.prototype.create_domain=function(a,b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("CreateDomain",{DomainName:a}),function(d){return b(d)})};c.prototype.delete_domain=function(a,b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("DeleteDomain",{DomainName:a}),function(d){return b(d)})};return c}();var Storage;
Storage=function(){var c;c={};c.get=function(a,b){var d;if(b==null)b=false;d=localStorage.getItem(a);if(b)d=JSON.parse(d);return d};c.set=function(a,b,d){if(d==null)d=false;if(d)b=JSON.stringify(b);localStorage.setItem(a,b);return b};c.del=function(a){return localStorage.removeItem(a)};return c}();var Settings;
Settings=function(){function c(a,b,d,f,e){this.access_key=a;this.secret_key=b;this.region=d!=null?d:"sdb.amazonaws.com";this.version=f!=null?f:"2009-04-15";this.https_protocol=e!=null?e:false}c.prototype.use_access_key=function(a){this.access_key=a;return this};c.prototype.use_secret_key=function(a){this.secret_key=a;return this};c.prototype.use_region=function(a){this.region=a;return this};c.prototype.use_version=function(a){this.version=a;return this};c.prototype.use_https_protocol=function(a){this.https_protocol=
a;return this};c.prototype.get_access_key=function(){return this.access_key};c.prototype.get_secret_key=function(){return this.secret_key};c.prototype.get_region=function(){return this.region};c.prototype.get_version=function(){return this.version};c.prototype.get_use_https=function(){return this.https_protocol};c.prototype.to_json=function(){return{access_key:this.access_key,secret_key:this.secret_key,region:this.region,version:this.version,https_protocol:this.https_protocol}};c.from_json=function(a){return a?
new c(a.access_key,a.secret_key,a.region,a.version,a.https_protocol):null};return c}();var Profile;
Profile=function(){function c(a,b){this.name=a;this.settings=b}c.prototype.use_name=function(a){this.name=a;return this};c.prototype.use_settings=function(a){this.settings=a;return this};c.prototype.get_name=function(){return this.name};c.prototype.get_settings=function(){return this.settings};c.prototype.make_primary=function(){Storage.set("chrome-sdb.primary-profile",this.name);return this};c.prototype.save=function(a){var b,d,f,e,l;if(a==null)a=false;f=c.find_all();b=false;e=0;for(l=f.length;e<
l;e++){d=f[e];if(this.name===d.get_name()){d.use_settings(this.settings);b=true}}b||f.push(this);Storage.set("chrome-sdb.profiles",c.profiles_json(f),true);if(c.primary()===null||a)this.make_primary();return this};c.prototype["delete"]=function(){c["delete"](this.name);return null};c.prototype.to_json=function(){return{name:this.name,settings:this.settings.to_json()}};c.primary=function(){var a;a=Storage.get("chrome-sdb.primary-profile");return c.find(a)};c.from_json=function(a){return a?new c(a.name,
Settings.from_json(a.settings)):null};c.find_all=function(){var a,b,d,f;b=(f=Storage.get("chrome-sdb.profiles",true))!=null?f:{};return function(){var e;e=[];for(a in b){d=b[a];e.push(new c(a,Settings.from_json(d)))}return e}()};c.find=function(a){var b,d,f,e;d=c.find_all();f=0;for(e=d.length;f<e;f++){b=d[f];if(b.get_name()===a)return b}return null};c.profiles_json=function(a){var b,d,f,e;d={};f=0;for(e=a.length;f<e;f++){b=a[f];d[b.get_name()]=b.get_settings().to_json()}return d};c.delete_all=function(){return Storage.set("chrome-sdb.profiles",
{},true)};c["delete"]=function(a){var b,d,f,e;f=c.find_all();d=[];b=0;for(e=f.length;0<=e?b<e:b>e;0<=e?b++:b--)f[b].get_name()!==a&&d.push(f[b]);return Storage.set("chrome-sdb.profiles",c.profiles_json(d),true)};return c}();var add_domains,add_item,confirm_delete,delete_domain,disable_delete,domain_from_query,edit_item,enable_delete,handle_delete_toggle,handle_error,handle_query,metadata,profile,query,save_domain,save_item,sdb,update_domains_table,update_region;profile=Profile.primary();
handle_error=function(c){var a,b;a=c.error.code;b=c.error.msg;c=c.meta.req_url;$("#error_code").text(a);$("#error_msg").text(b);$("#error_url").attr("href",c);$("#message_box").show();return $("#query_btn").button("reset")};if(profile){sdb=new SimpleDB(profile,false,handle_error);$(function(){return update_domains_table()})}else window.location="config.html";update_region=function(c){profile.get_settings().use_region(c);profile.save();sdb=new SimpleDB(profile,false,handle_error);return update_domains_table()};
$(function(){var c,a,b,d;d=SimpleDB.regions();a=0;for(b=d.length;a<b;a++){c=d[a];$("#region_select").append($("<option>",{value:c.endpoint}).text(c.name))}$("#region_select").val(profile.get_settings().get_region());return $("#region_select").change(function(){c=$("#region_select").val();return update_region(c)})});$(function(){$("#domain_table_div").height($(window).height()-200);return $(window).resize(function(){return $("#domain_table_div").height($(this).height()-200)})});
add_domains=function(c){var a,b,d,f,e;if(c.length===0){a="<tr><td>No domains in this region</td></tr>";return $("#domains_table > tbody").html(a)}else{$("#domains_table > tbody").html("");f=0;for(e=c.length;f<e;f++){d=c[f];b=$('<button id="metadata_'+d+'" class="btn info">metadata</a>');b.click(function(){return metadata(d)});a=$('<button id="delete_'+d+'" class="btn" disabled="disabled" style="margin-left:5px">delete</button>');a.click(function(){return confirm_delete(d)});a=$("<td>"+d+"<br /></td>").append(b).append(a);
a=$("<tr></tr>").append(a);$("#domains_table > tbody").append(a)}$("#domain_select > option").remove();a=[];f=0;for(e=c.length;f<e;f++){d=c[f];a.push($("#domain_select").append($("<option>",{value:d}).text(d)))}return a}};update_domains_table=function(c){if(c==null)c=null;return sdb.list_domains(function(a){add_domains(a.domains);if(c!=null)return c()})};
add_item=function(){$("#domain_select").val(domain_from_query());$("#item_name").val("");$("#attr_name").val("");$("#attr_value_textarea").val("");$("#attr_value_is_multivalued").removeAttr("checked");return $("#add_edit_item_label").text("Add Item")};
edit_item=function(c,a,b,d){$("#domain_select").val(c);$("#item_name").val(a);$("#attr_name").val(b);$("#attr_value_textarea").val(d.join("\n")).attr("rows",Math.max(1,d.length));d.length>1?$("#attr_value_is_multivalued").attr("checked","checked"):$("#attr_value_is_multivalued").removeAttr("checked");$("#add_edit_item_label").text("Edit Item");return $("#add_edit_item_attributes").modal("show")};
save_item=function(){var c,a,b,d,f,e,l;e=$("#domain_select").val();l=$("#item_name").val();b=$("#attr_name").val();f=$("#attr_value_textarea").val();d=$("#attr_replace").is(":checked");c=$("#attr_value_is_multivalued").is(":checked");a=$("#attr_value_delimiter").val();c=c?f.split(RegExp(a)):[f];return sdb.put_attributes(e,l,[{name:b,values:c,replace:d}],function(){return $("#add_edit_item_attributes").modal("hide")})};
enable_delete=function(){$("button[id^=delete_]").removeAttr("disabled").addClass("danger").removeClass("secondary");return $("#domain_deletion_control").text("Disable Delete").addClass("danger").removeClass("secondary").addClass("active")};disable_delete=function(){$("button[id^=delete_]").attr("disabled","disabled").addClass("secondary").removeClass("danger");return $("#domain_deletion_control").text("Enable Delete").addClass("secondary").removeClass("danger").removeClass("active")};
handle_delete_toggle=function(){return $("#domain_deletion_control").hasClass("active")?disable_delete():enable_delete()};domain_from_query=function(){var c;c=$("#query_expr").val().match(/\`(.+)\`/);return c!==null?c[1]:null};
handle_query=function(c){var a,b,d,f,e,l,p;$("#message_box").hide();f=c.items.length;e=c.next_token;if(e!=null){e=e.replace(/\n/g,"");$("#next_page_btn").removeAttr("disabled").click(function(){return query(e)})}else $("#next_page_btn").attr("disabled","disabled").unbind("click");if(f===0){$("#query_results_table > thead").html("<tr><th>Items</th></tr>");$("#query_results_table > tbody").html("<tr><td>No results...</td></tr>")}else{f=function(){var n,o,k,r;k=c.attr_names;r=[];n=0;for(o=k.length;n<
o;n++){a=k[n];r.push("<th>"+a+"</th>")}return r}();p=function(){var n,o,k,r;k=c.items;r=[];n=0;for(o=k.length;n<o;n++){d=k[n];l=function(){var u,s,i,g;i=c.attr_names;g=[];u=0;for(s=i.length;u<s;u++){a=i[u];b=d.attrs[a];g.push(b!=null?b.length>1?'<td data-attr-name="'+a+'" data-attr-multivalued="true"><table class="multivalued"><tbody><tr><td>'+b.join("</td></tr><tr><td>")+"</td></tr></tbody></table></td>":'<td data-attr-name="'+a+'" data-attr-multivalued="false">'+b.join("")+"</td>":'<td data-attr-name="'+
a+'" data-attr-multivalued="false"></td>')}return g}();r.push('<tr data-item-name="'+d.name+'"><td>'+d.name+"</td>"+l.join("")+"</tr>")}return r}();$("#query_results_table > thead").html("<tr><th>Item Name</th>"+f.join("")+"</tr>");$("#query_results_table > tbody").html(p.join(""));$("#query_results_table > tbody > tr").each(function(n,o){return $(o).children("td").each(function(k,r){var u,s;if(k>0){u=function(){return $(this).addClass("edititem").dblclick(function(){var i,g,h;g=$(this).parent().attr("data-item-name");
a=$(this).attr("data-attr-name");i=$(this).attr("data-attr-multivalued")==="true";h=[];i?$(this).children("table").children("tbody").children("tr").children("td").each(function(j,q){return h.push($(q).text())}):h.push($(this).text());return edit_item(domain_from_query(),g,a,h)})};s=function(){return $(this).removeClass("edititem")};return $(r).hover(u,s)}})})}return $("#query_btn").button("reset")};query=function(c){var a;if(c==null)c=null;a=$("#query_expr").val();sdb.select(a,handle_query,c);return $("#query_btn").button("loading")};
metadata=function(c){return sdb.domain_metadata(c,function(a){$("#domain_metadata_label").html("<h2>"+c+" <small>Metadata</small></h2>");$("input[name=itemCount]").val(a.item_count);$("input[name=itemNamesSizeBytes]").val(a.item_names_size_bytes);$("input[name=attributeNameCount]").val(a.attribute_name_count);$("input[name=attributeNamesSizeBytes]").val(a.attribute_names_size_bytes);$("input[name=attributeValueCount]").val(a.attribute_value_count);$("input[name=attributeValuesSizeBytes]").val(a.attribute_values_size_bytes);
return $("#domain_metadata_modal").modal("show")})};$(function(){return $("input[name=confirm_delete]").keydown(function(c){return $("input[name=confirm_delete]").val()==="DELET"&&c.keyCode===69?$("#confirm_delete_domain_btn").removeAttr("disabled").addClass("danger").removeClass("secondary"):$("#confirm_delete_domain_btn").attr("disabled","disabled").addClass("secondary").removeClass("danger")})});
confirm_delete=function(c){$("#domain_delete_label").html("<h2>Delete "+c+"?</h2>");$("input[name=confirm_delete]").val("");$("#confirm_delete_domain_modal").modal("show");return $("#confirm_delete_domain_btn").click(function(){return delete_domain(c)})};delete_domain=function(c){$("#confirm_delete_domain_btn").button("loading");return sdb.delete_domain(c,function(){$("#confirm_delete_domain_btn").button("reset");return update_domains_table(function(){disable_delete();return $("#confirm_delete_domain_modal").modal("hide")})})};
save_domain=function(){var c;c=$("#domain_name").val();$("#save_domain").button("loading");return sdb.create_domain(c,function(){return update_domains_table(function(){$("#save_domain").button("reset");return $("#create_domain_modal").modal("hide")})})};var add_sample_domain,finish_tour,optional_add_domain,sample_query,sample_query_results;add_sample_domain=function(){if($("#domain_select > option").length<1)return add_domains(["example_domain_chrome_sdb"])};
optional_add_domain=function(){add_sample_domain();return guiders.next()};sample_query=function(){var c;c=$($("#domain_select > option")[0]).text();$("#query_expr").val("select * from `"+c+"`");return guiders.next()};sample_query_results=function(){handle_query({items:[{name:"item name",attrs:{"single value attribute":["attribute value"],"multivalued attribute":["val A","val B"]}}],attr_names:["single value attribute","multivalued attribute"]});return guiders.next()};
finish_tour=function(){handle_query({items:[],attr_names:[]});$("#query_expr").val("");update_domains_table();Storage.set("chrome-sdb-intro","true");return guiders.hideAll()};
$(function(){if(Storage.get("chrome-sdb-intro")===null){guiders.createGuider({buttons:[{name:"Next",onclick:optional_add_domain}],description:"This is the Query page in the Chrome Simple DB Tool.  This page is where you add and edit Items and Query your Simple DB domains.",id:"first",next:"second",overlay:true,title:"Chrome Simple DB Tool: Query Page"}).show();guiders.createGuider({attachTo:"#domains_table",buttons:[{name:"Next"}],description:"The domains table shows all the Simple DB domains in the selected Amazon Web Services Region.",
id:"second",next:"third",position:2,title:"Domains Table",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#region_select",buttons:[{name:"Next"}],description:"The Region selector allows you to change the region that you are querying.  It updates the Domain table automatically.",id:"third",next:"forth",position:2,title:"Regions Select",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#create_domain",buttons:[{name:"Next"}],description:'If you need to add another domain, use the "Create Domain" button.',
id:"forth",next:"fifth",position:2,title:"Create Domain",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#domain_deletion_control",buttons:[{name:"Next"}],description:"This button toggles domain deletion enablement.",id:"fifth",next:"sixth",position:2,title:"Delete Domain Control",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#query_expr",buttons:[{name:"Next",onclick:sample_query}],description:'Enter domain select expressions in the query box.  Don\'t forget to enclose your domain in backticks ("`") in the query',
id:"sixth",next:"seven",position:6,title:"Query your domains",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#query_results_table",buttons:[{name:"Next",onclick:sample_query_results}],description:"Query results show up in the in the table below.",id:"seven",next:"eight",position:12,title:"Query results",width:450,offset:{top:-30,left:0}});guiders.createGuider({attachTo:"#query_results_table",buttons:[{name:"Next"}],description:"Scroll over an attribute and click on it to edit.",
id:"eight",next:"ninth",position:6,title:"Edit attributes",width:450,offset:{top:-30,left:0}});return guiders.createGuider({buttons:[{name:"Close",onclick:finish_tour}],description:"That's it!  Please submit feedback and bugs and enjoy.",id:"ninth",overlay:true,title:"Cool? Cool..."})}});})();
