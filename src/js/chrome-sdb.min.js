(function(){var SHA1;
SHA1=function(){var g,a,b,d,e,c,k,m,n,q,o,u,v,s;d={};q=function(j){return g(a(k(j),j.length*8))};n=function(j,h){var i,f,p,l;i=k(j);if(i.length>16)i=a(i,j.length*8);p=Array(16);l=Array(16);for(f=0;f<16;f++){p[f]=i[f]^909522486;l[f]=i[f]^1549556828}i=a(p.concat(k(h)),512+h.length*8);return g(a(l.concat(i),672))};m=function(j,h){var i,f,p,l,r;if(h==null)h=true;i=h?"0123456789abcdef":"0123456789ABCDEF";p="";f=0;for(r=j.length;0<=r?f<r:f>r;0<=r?f++:f--){l=j.charCodeAt(f);p+=i.charAt(l>>>4&15)+i.charAt(l&
15)}return p};c=function(j,h){var i,f,p,l,r;if(h==null)h="=";l="";p=j.length;for(i=0;i<p;i+=3){r=j.charCodeAt(i)<<16|(i+1<p?j.charCodeAt(i+1)<<8:0)|(i+2<p?j.charCodeAt(i+2):0);for(f=0;f<4;f++)l+=i*8+f*6>j.length*8?h:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-f)&63)}return l};e=function(j,h){var i,f,p,l,r,w,t,x;f=h.length;p=[];i=Array(Math.ceil(j.length/2));l=0;for(r=i.length;0<=r?l<r:l>r;0<=r?l++:l--)i[l]=j.charCodeAt(l*2)<<8|j.charCodeAt(l*2+1);for(;i.length>
0;){w=[];l=t=0;for(x=i.length;0<=x?l<x:l>x;0<=x?l++:l--){t=(t<<16)+i[l];r=Math.floor(t/f);t-=r*f;if(w.length>0||r>0)w[w.length]=r}p[p.length]=t;i=w}i="";for(l=f=p.length-1;f<=0?l<=0:l>=0;f<=0?l++:l--)i+=h.charAt(p[l]);p=Math.ceil(j.length*8/(Math.log(h.length)/Math.log(2)));for(l=f=i.length;f<=p?l<=p:l>=p;f<=p?l++:l--)i=h[0]+i;return i};s=function(j){var h,i,f,p,l;i="";h=0;for(l=j.length;0<=l?h<l:h>l;0<=l?h++:h--){f=j.charCodeAt(h);p=h+1<j.length?j.charCodeAt(h+1):0;if(55296<=f&&f<=56319&&56320<=
p&&p<=57343){f=65536+((f&1023)<<10)+(p&1023);h++}if(f<=127)i+=String.fromCharCode(f);else if(f<=2047)i+=String.fromCharCode(192|f>>>6&31,128|f&63);else if(f<=65535)i+=String.fromCharCode(224|f>>>12&15,128|f>>>6&63,128|f&63);else if(f<=2097151)i+=String.fromCharCode(240|f>>>18&7,128|f>>>12&63,128|f>>>6&63,128|f&63)}return i};k=function(j){var h,i,f;i=Array(j.length>>2);h=0;for(f=i.length;0<=f?h<f:h>f;0<=f?h++:h--)i[h]=0;h=0;for(f=j.length*8;h<f;h+=8)i[h>>5]|=(j.charCodeAt(h/8)&255)<<24-h%32;return i};
g=function(j){var h,i,f;i="";h=0;for(f=j.length*32;h<f;h+=8)i+=String.fromCharCode(j[h>>5]>>>24-h%32&255);return i};a=function(j,h){var i,f,p,l,r,w,t,x,z,A,B,C,D,y,E;j[h>>5]|=128<<24-h%32;j[(h+64>>9<<4)+15]=h;y=Array(80);i=1732584193;f=-271733879;p=-1732584194;l=271733878;r=-1009589776;w=0;for(E=j.length;w<E;w+=16){x=i;z=f;A=p;B=l;C=r;for(t=0;t<80;t++){y[t]=t<16?j[w+t]:b(y[t-3]^y[t-8]^y[t-14]^y[t-16],1);D=o(o(b(i,5),u(t,f,p,l)),o(o(r,y[t]),v(t)));r=l;l=p;p=b(f,30);f=i;i=D}i=o(i,x);f=o(f,z);p=o(p,
A);l=o(l,B);r=o(r,C)}return Array(i,f,p,l,r)};u=function(j,h,i,f){return j<20?h&i|~h&f:j<40?h^i^f:j<60?h&i|h&f|i&f:h^i^f};v=function(j){return j<20?1518500249:j<40?1859775393:j<60?-1894007588:-899497514};o=function(j,h){var i;i=(j&65535)+(h&65535);return(j>>16)+(h>>16)+(i>>16)<<16|i&65535};b=function(j,h){return j<<h|j>>>32-h};d.hex_sha1=function(j){return m(q(s(j)))};d.b64_sha1=function(j){return c(q(s(j)))};d.any_sha1=function(j,h){return e(q(s(j)),h)};d.hex_hmac_sha1=function(j,h){return m(n(s(j),
s(h)))};d.b64_hmac_sha1=function(j,h){return c(n(s(j),s(h)))};d.any_hmac_sha1=function(j,h,i){return e(n(s(j),s(h)),i)};return d}();var Storage;Storage=function(){var g;g={};g.get=function(a,b){var d;if(b==null)b=false;d=localStorage.getItem(a);if(b)d=JSON.parse(d);return d};g.set=function(a,b,d){if(d==null)d=false;if(d)b=JSON.stringify(b);localStorage.setItem(a,b);return b};g.del=function(a){return localStorage.removeItem(a)};return g}();var Settings;
Settings=function(){function g(a,b,d,e){this.access_key=a;this.secret_key=b;this.region=d!=null?d:"us-east-1";this.version=e!=null?e:"2009-04-15"}g.prototype.use_access_key=function(a){this.access_key=a;return this};g.prototype.use_secret_key=function(a){this.secret_key=a;return this};g.prototype.use_region=function(a){this.region=a;return this};g.prototype.use_version=function(a){this.version=a;return this};g.prototype.get_access_key=function(){return this.access_key};g.prototype.get_secret_key=
function(){return this.secret_key};g.prototype.get_region=function(){return this.region};g.prototype.get_version=function(){return this.version};g.prototype.to_json=function(){return{access_key:this.access_key,secret_key:this.secret_key,region:this.region,version:this.version}};g.from_json=function(a){return a?new g(a.access_key,a.secret_key,a.region,a.version):null};return g}();var AwsUtils;
AwsUtils=function(){var g,a,b,d,e;e=function(c){c=c.toString();if(c.length<2)c="0"+c;return c};d=function(c){return[c.getUTCFullYear(),e(c.getUTCMonth()+1),e(c.getUTCDate())].join("-")};g=function(c){return[e(c.getUTCHours()),e(c.getUTCMinutes()),e(c.getUTCSeconds())].join(":")};b=function(c,k){return c===k?0:c.toLowerCase()>k.toLowerCase()?1:-1};a={};a.date_time_format=function(c){if(c==null)c=new Date;return""+d(c)+"T"+g(c)+".000Z"};a.generate_sig=function(c,k){var m,n,q;n=function(){var o;o=[];
for(m in c)o.push(m);return o}();n.sort(b);q=function(){var o,u,v;v=[];o=0;for(u=n.length;o<u;o++){m=n[o];v.push(""+m+c[m])}return v}();return SHA1.b64_hmac_sha1(k,q.join(""))};return a}();var SimpleDB,__indexOf=Array.prototype.indexOf||function(g){for(var a=0,b=this.length;a<b;a++)if(this[a]===g)return a;return-1};
SimpleDB=function(){function g(a,b){this.profile=a;this.endpoint=b!=null?b:"sdb.amazonaws.com";this.sdb_base_url="http://"+this.endpoint+"?"}g.prototype.set_profile=function(a){return this.profile=a};g.prototype.default_callback=function(a){return console.log(a)};g.prototype.build_request_url=function(a,b){var d,e;b.Action=a;b.Timestamp=AwsUtils.date_time_format();b.AWSAccessKeyId=this.profile.get_settings().get_access_key();b.Version=this.profile.get_settings().get_version();b.SignatureVersion=1;
b.Signature=AwsUtils.generate_sig(b,this.profile.get_settings().get_secret_key());return this.sdb_base_url+function(){var c;c=[];for(d in b){e=b[d];c.push(d+"="+encodeURIComponent(e))}return c}().join("&")};g.parse_metadata=function(a,b,d){return{meta:{req_id:$("RequestId",a).text(),box_usage:parseFloat($("BoxUsage",a).text()),status:b,req_url:d}}};g.prototype.ajax_request=function(a,b,d,e){if(d==null)d="GET";if(e==null)e=b;return $.ajax({type:d,url:a,success:function(c,k){return b(g.parse_metadata(c,
k,a),c)},error:function(c,k){var m;m=g.parse_metadata(c.responseXML,k,a);m.error={msg:$("Message",c.responseXML).text(),code:$("Code",c.responseXML).text()};return e(m,c.responseXML)},dataType:"xml"})};g.prototype.list_domains=function(a,b,d){var e,c;if(a==null)a=this.default_callback;if(b==null)b=100;if(d==null)d=null;if(__indexOf.call(function(){c=[];for(e=1;e<=100;e++)c.push(e);return c}.apply(this),b)<0)throw"Max domains must be between 1 and 100";b={MaxNumberOfDomains:b};if(d)b.NextToken=d;return this.ajax_request(this.build_request_url("ListDomains",
b),function(k,m){var n;k.error!=null&&a(k);n=[];$("DomainName",m).each(function(){return n.push($(this).text())});k.domains=n;k.next_token=$("NextToken",m).text();return a(k)})};g.prototype.domain_metadata=function(a,b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("DomainMetadata",{DomainName:a}),function(d,e){d.error!=null&&b(d);d.creation_date_time=$("CreationDateTime",e).text();d.item_count=parseInt($("ItemCount",e).text());d.item_names_size_bytes=parseInt($("ItemNamesSizeBytes",
e).text());d.attribute_name_count=parseInt($("AttributeNameCount",e).text());d.attribute_names_size_bytes=parseInt($("AttributeNamesSizeBytes",e).text());d.attribute_value_count=parseInt($("AttributeValueCount",e).text());d.attribute_values_size_bytes=parseInt($("AttributeValuesSizeBytes",e).text());d.timestamp=$("Timestamp",e).text();return b(d)})};g.prototype.select=function(a,b,d){if(b==null)b=this.default_callback;if(d==null)d=null;a={SelectExpression:a};if(d)a.NextToken=d;return this.ajax_request(this.build_request_url("Select",
a),function(e,c){var k;e.error!=null&&b(e);k=[];$("Item",c).each(function(){var m;m={attrs:{},name:$("Name:first",$(this)).text()};$("Attribute",$(this)).each(function(){var n,q;n=$("Name",$(this)).text();q=$("Value",$(this)).text();m.attrs[n]||(m.attrs[n]=[]);return m.attrs[n].push(q)});return k.push(m)});e.items=k;e.next_token=$("NextToken",c).text();return b(e)})};g.prototype.get_attributes=function(a,b,d,e){var c;if(d==null)d=this.default_callback;if(e==null)e=[];b={DomainName:a,ItemName:b};a=
0;for(c=e.length;0<=c?a<c:a>c;0<=c?a++:a--)b["AttributeName."+a]=e[a];return this.ajax_request(this.build_request_url("GetAttributes",b),function(k,m){var n;k.error!=null&&d(k);n={};$("Attribute",m).each(function(){var q,o;q=$("Name",$(this)).text();o=$("Value",$(this)).text();n[q]||(n[q]=[]);return n[q].push(o)});k.attributes=n;return d(k)})};g.prototype.put_attributes=function(a,b,d,e){var c,k,m,n,q,o,u;if(e==null)e=this.default_callback;k={DomainName:a,ItemName:b};n=b=0;for(o=d.length;n<o;n++){a=
d[n];c=a.values;q=0;for(u=c.length;q<u;q++){m=c[q];k["Attribute."+b+".Name"]=a.name;k["Attribute."+b+".Value"]=m;if(a.replace&&a.replace===true)k["Attribute."+b+".Replace"]=true;b+=1}}return this.ajax_request(this.build_request_url("PutAttributes",k),function(v){return e(v)})};g.prototype.delete_attributes=function(a,b,d,e){var c,k,m,n,q,o,u;if(e==null)e=this.default_callback;k={DomainName:a,ItemName:b};n=b=0;for(o=d.length;n<o;n++){a=d[n];if(c=a.values){q=0;for(u=c.length;q<u;q++){m=c[q];k["Attribute."+
b+".Name"]=a.name;k["Attribute."+b+".Value"]=m;b+=1}}else{k["Attribute."+b+".Name"]=a.name;b+=1}}return this.ajax_request(this.build_request_url("DeleteAttributes",k),function(v){return e(v)})};g.prototype.batch_delete_attributes=function(a,b,d){var e,c,k,m,n,q,o,u,v,s,j;if(d==null)d=this.default_callback;m={DomainName:a};a=0;for(s=b.length;0<=s?a<s:a>s;0<=s?a++:a--){e=b[a];c=e.item_name;m["Item."+a+".ItemName"]=c;c=0;j=e.item_attrs;q=0;for(u=j.length;q<u;q++){e=j[q];if(k=e.values){o=0;for(v=k.length;o<
v;o++){n=k[o];m["Item."+a+".Attribute."+c+".Name"]=e.name;m["Item."+a+".Attribute."+c+".Value"]=n;c+=1}}else{m["Item."+a+".Attribute."+c+".Name"]=e.name;c+=1}}}return this.ajax_request(this.build_request_url("BatchDeleteAttributes",m),function(h){return d(h)})};g.prototype.batch_put_attributes=function(a,b,d){var e,c,k,m,n,q,o,u,v,s,j;if(d==null)d=this.default_callback;m={DomainName:a};a=0;for(s=b.length;0<=s?a<s:a>s;0<=s?a++:a--){e=b[a];c=e.item_name;m["Item."+a+".ItemName"]=c;c=0;j=e.item_attrs;
q=0;for(u=j.length;q<u;q++){e=j[q];k=e.values;o=0;for(v=k.length;o<v;o++){n=k[o];m["Item."+a+".Attribute."+c+".Name"]=e.name;m["Item."+a+".Attribute."+c+".Value"]=n;if(e.replace&&e.replace===true)m["Item."+a+".Attribute."+c+".Replace"]=true;c+=1}}}return this.ajax_request(this.build_request_url("BatchPutAttributes",m),function(h){return d(h)})};g.prototype.create_domain=function(a,b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("CreateDomain",{DomainName:a}),
function(d){return b(d)})};g.prototype.delete_domain=function(a,b){if(b==null)b=this.default_callback;return this.ajax_request(this.build_request_url("DeleteDomain",{DomainName:a}),function(d){return b(d)})};return g}();var Profile;
Profile=function(){function g(a,b){this.name=a;this.settings=b}g.prototype.use_name=function(a){this.name=a;return this};g.prototype.use_settings=function(a){this.settings=a;return this};g.prototype.get_name=function(){return this.name};g.prototype.get_settings=function(){return this.settings};g.prototype.make_primary=function(){Storage.set("chrome-sdb.primary-profile",this.name);return this};g.prototype.save=function(a){var b,d,e,c,k;if(a==null)a=false;e=g.find_all();b=false;c=0;for(k=e.length;c<
k;c++){d=e[c];if(this.name===d.get_name()){d.use_settings(this.settings);b=true}}b||e.push(this);Storage.set("chrome-sdb.profiles",g.profiles_json(e),true);if(g.primary()===null||a)this.make_primary();return this};g.prototype["delete"]=function(){g["delete"](this.name);return null};g.prototype.to_json=function(){return{name:this.name,settings:this.settings.to_json()}};g.primary=function(){var a;a=Storage.get("chrome-sdb.primary-profile");return g.find(a)};g.from_json=function(a){return a?new g(a.name,
Settings.from_json(a.settings)):null};g.find_all=function(){var a,b,d,e;b=(e=Storage.get("chrome-sdb.profiles",true))!=null?e:{};return function(){var c;c=[];for(a in b){d=b[a];c.push(new g(a,Settings.from_json(d)))}return c}()};g.find=function(a){var b,d,e,c;d=g.find_all();e=0;for(c=d.length;e<c;e++){b=d[e];if(b.get_name()===a)return b}return null};g.profiles_json=function(a){var b,d,e,c;d={};e=0;for(c=a.length;e<c;e++){b=a[e];d[b.get_name()]=b.get_settings().to_json()}return d};g.delete_all=function(){return Storage.set("chrome-sdb.profiles",
{},true)};g["delete"]=function(a){var b,d,e,c;e=g.find_all();d=[];b=0;for(c=e.length;0<=c?b<c:b>c;0<=c?b++:b--)e[b].get_name()!==a&&d.push(e[b]);return Storage.set("chrome-sdb.profiles",g.profiles_json(d),true)};return g}();var handle_domains,profile,sdb;(profile=Profile.primary())||chrome.tabs.create({url:"config.html"});handle_domains=function(){};sdb=new SimpleDB(profile);
sdb.list_domains(function(g){var a,b,d,e;b=g.domains;e=function(){var c,k,m;m=[];c=0;for(k=b.length;c<k;c++){a=b[c];d='<a id="metadata_'+a+'" class="btn" href="#">Metadata</a>';m.push("<tr><td>"+a+"</td><td>"+d+"</td></tr>")}return m}();return $(function(){return $("#domains_table > tbody").html(e.join(""))})});})();
